---
import { createContentHelpers } from "@toolkit/content";
import Button from "@yws/Button";

const { locale = "en", currentPath = "/", menuLabel = "Main menu" } = Astro.props;
const { getContent } = createContentHelpers();
const menu = (await getContent(locale, "menu")) || [];
const headerItems = menu.filter((item) => {
  if (Array.isArray(item?.showIn)) return item.showIn.includes("header");
  return item?.isHeader ?? true;
});
---

<nav class="menu" aria-label={menuLabel}>
  <ul class="menu__list">
    {
      headerItems.map((item) => {
        const isActive = item.href && currentPath?.startsWith(item.href);
        return (
          <li class={`menu__item${isActive ? " is-active" : ""}`}>
            <Button class="menu__link" href={item.href} size="sm">
              {item.label}
            </Button>
          </li>
        );
      })
    }
  </ul>
</nav>
